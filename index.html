<!doctype html>
<html class="no-js" lang="en">
<head >
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi" />
    <title>首页</title>
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/foundation.min.css" />
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
<!--<div style="min-width:1000px;background: url('img/ditu.jpg') no-repeat;background-size: contain;width: 100%;height: 8584px;">-->
    <!--<div class="row">-->
        <!--<div class="large-4 small-4 columns">-->
            <!--<img src="img/logo.png">-->
        <!--</div>-->
        <!--<div class="large-2 small-2 columns">-->
            <!--<img src="img/logo1.png" style="margin-top: 4rem;">-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="row">-->
        <!--<div class="sjds-bg"></div>-->
        <!--<div class="medium-offset-1 medium-10 columns end">-->
            <!--<div class="jxsz-bg"></div>-->
            <!--<div class="cpjs-bg"></div>-->
        <!--</div>-->
    <!--</div>-->
    <!--&lt;!&ndash;<div class="activity-btn">&ndash;&gt;-->
        <!--&lt;!&ndash;<div class="row">&ndash;&gt;-->
            <!--&lt;!&ndash;<img src="img/wybm.png" class="right img1">&ndash;&gt;-->
        <!--&lt;!&ndash;</div>&ndash;&gt;-->
        <!--&lt;!&ndash;<div class="row">&ndash;&gt;-->
            <!--&lt;!&ndash;<img src="img/wytp.png" class="right img2">&ndash;&gt;-->
        <!--&lt;!&ndash;</div>&ndash;&gt;-->
        <!--&lt;!&ndash;<div class="row">&ndash;&gt;-->
            <!--&lt;!&ndash;<img src="img/hdjs.png" class="right img3">&ndash;&gt;-->
        <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
<!--</div>-->

<!--活动介绍-->
<button type="button" class="button" data-reveal-id="myModal">Click To Open Modal</button>
<div id="myModal1" class="reveal-modal full" data-reveal>
    <a class="close-reveal-modal">&times;</a>
    <div style="background: url('img/hdjs.jpg') no-repeat;background-size: cover;width: 100%;min-width:1000px;">
        <div class="row">
            <div class="medium-9 columns end">
                <div class="cssm-bg"></div>
            </div>
            <div class="medium-offset-3 medium-9 columns">
                <div class="pxbz-bg"></div>
            </div>
        </div>
        <div class="row">
            <div class="circle-content circle-content-csxz">
                <ul>
                    <li class="row">
                        <div>1</div>
                        <span>
                        参赛者在提交作品前请确保已经阅读并且愿意遵守相关比赛规则，任何违反比 赛规则的作品，主办方有权取消其参赛资格。
                    </span>
                    </li>
                    <li  class="row">
                        <div>2</div>
                        <span>
                     参赛者提交的参赛作品均须未被商用或授权他人使用，必须为参赛者原创，不得抄袭，盗用他人作品，且版权未移交他人。（如作品中含有素材元素,《非原创部分》，作者需拥有该素材版权的使用授权许可）若在比赛或商业应用过程中发生版权纠纷，其法律责任由参赛者本人承担。
                    </span>
                    </li>
                    <li class="row">
                        <div>3</div>
                        <span>
                     参赛期间，参赛者不得将参赛作品转让或授权给任何第三方，不得用参赛作品参与与本赛事相同或类似的其他活动。
                    </span>
                    </li>
                    <li class="row">
                        <div>4</div>
                        <span>
                      如多人合作，需征得所有合作者同意并标明所有合作者姓名；同一用户名只可上存一个参赛作品。
                    </span>
                    </li>
                    <li class="row">
                        <div>5</div>
                        <span>
                        为保证本次赛事活动的公平公正，参赛作品不得添加任何与本次大赛无关的第三方LOGO。
                    </span>
                    </li>
                    <li class="row">
                        <div>6</div>
                        <span>
                        为了作品呈现的统一性以及便于主办方的传播推广，请参赛者使用本次大赛的【专用模板】进行作品上存，并存为RGB模式及CMYK模式、JPG格式。
                    </span>
                    </li>
                    <li class="row">
                        <div>7</div>
                        <span>
                        请参赛者仔细阅读参赛须知，并认真对待赛事及主办方品牌，不得发表违法、恶搞、冒名、过于潦草等不符合参赛要求的“占位”作品。
                    </span>
                    </li>
                    <li class="row">
                        <div>8</div>
                        <span>
                        本赛区为唯一报名参赛渠道，请参赛者按照赛事规定报名参赛，并上存参赛作品。（其他渠道报名及提交作品均视为参赛无效）
                    </span>
                    </li>
                    <li class="row">
                        <div>9</div>
                        <span>
                        因赛事中后期作品上传量较大，参赛者合理安排参赛时间，及时交稿，避免重复上传或上传失败。
                    </span>
                    </li>
                    <li class="row">
                        <div>7</div>
                        <span>
                    在大赛征集期间如有任何疑义或帮助请发送相关材料至xxx邮箱
                    </span>
                    </li>

                </ul>
            </div>
        </div>
        <div class="row">
            <div class="medium-offset-1 medium-10 columns end">
                <div class="hjtz-content">
                    <p>8月20日公布线上投票的</p>
                    <p>前20名获奖名单，</p>
                    <p>进入下轮线下评选活动。</p>
                    <p>入围的选手将有专人致电或邮箱通知。</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="circle-content circle-content-xgqy">
                <ul>
                    <li class="row">
                        <div>1</div>
                        <span>
                        线上投票入围作品(共20名)的完整版权将转让至主办方公司(或其指定的公司),作者需协助签署《著作权转让协议》。主办方享有对相应设计方案进行再设计、生产、出版等全部权益,作者不得将此权利再次授权任何其他个人或机构。作者保留对其作品的永久署名权。
                    </span>
                    </li>
                    <li  class="row">
                        <div>2</div>
                        <span>
                        若主办方需对获奖作品进行进步完善或开发、设计周边产品,获奖作者需协助配合。
                    </span>
                    </li>
                    <li class="row">
                        <div>3</div>
                        <span>
                        自线上投票入围作品(共20名)的著作权仍归原作者所有,主办方享有其作品的使用权,获奖设计师需协助主办方签署《著作权许可使用协议》。
                    </span>
                    </li>
                    <li class="row">
                        <div>4</div>
                        <span>
                        未获奖作品版权归原作者所有,主办方不得以任停形式使用或外泄源文件。
                    </span>
                    </li>
                    <li class="row">
                        <div>5</div>
                        <span>
                        承办单位拥有对全部参赛作品进行展示、报道、宣传及用于市场活动的权利,作者保留对其作品的署名权。主办方如需对该作品进行开发书面许可,并向作者支付相应设计费用。
                    </span>
                    </li>
                    <li class="row">
                        <div>6</div>
                        <span>
                        作品一经提交,将视为参赛作者同意并遵守比赛相关规定,若作品在商业使用中其著作权存在争议,主办单位不承担因作品侵犯他人(或单位)的权利而产生的法律责任,由提供作品的参赛者承担全部法律责任。
                    </span>
                    </li>
                    <li class="row">
                        <div>7</div>
                        <span>
                        如果获奖作者放弃履行相关版权转让或授权义务,则视为主动放弃相应奖项。
                    </span>
                    </li>
                    <li class="row">
                        <div>8</div>
                        <span>
                        主办方对本活动保留最终解释权。
                    </span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!--表单-->
<div id="myModal" class="reveal-modal title-size" data-reveal>
    <a class="close-reveal-modal">&times;</a>
    <div class="message-content">
        <h3 class="yellow">填写个人信息：</h3>
        <div class="row">
            <span class="left white">姓名&nbsp;：&nbsp;</span>
            <input class="left" id="name" type="text" style="width: 30%;">
        </div>
        <div class="row">
            <span class="left white">联系电话&nbsp;：&nbsp;</span>
            <input class="left" id="number" type="text" style="width: 40%;">
        </div>
        <h3 class="yellow mt1rem">填写作品信息：</h3>
        <div class="row">
            <span class="left white">作品名称&nbsp;：&nbsp;</span>
            <input class="left" id="title" type="text" style="width: 40%;">
        </div>
        <div class="row">
            <div id="type" class="select-btn">
                <span>组别</span>
                <ul class="dropdown">
                    <li>潮品</li>
                    <img src="img/quxian.png">
                    <li>车品</li>
                </ul>
            </div>
            <textarea rows="4" id="details" class="right" placeholder="作品描述（500字以内）" style="width: 70%;" ></textarea>
        </div>
        <div class="row text-center">
            <button id="filePicker" type="button" class="button radius">上传以往作品</button>
        </div>
        <div class="text-center">
            <button type="button" id="submit" class="button radius mr1rem">确认</button>
            <button type="button" id="back" class="button radius ml1rem">返回</button>
        </div>
    </div>
    <div class="message-success">
        <img src="img/success.png">
        <p class="title-size yellow">上传成功，等待审核中......</p>
        <img src="img/error.png">
        <p class="title-size yellow">上传失败，请重新选择</p>
    </div>
</div>

<script src="js/jquery.min.js"></script>
<script src="js/foundation.min.js"></script>
<script src="js/modernizr.js"></script>
<script src="js/webuploader.min.js"></script>
<script>
    var baseUrl="http://47.75.127.206/";
    var uploadUrl = "http://47.75.127.206:8080/image-server/uploadImage?mediaType=Picture&module=L";
    var imgUrl="http://47.75.127.206:8080/image-server/imageThumbnail?relUrl="
    var groups, photo;
    $(document).ready(function() {
        $(document).foundation({
            reveal: {
                close_on_background_click: false,
                close_on_esc: false
            }
        });
    })
    // 上传
    jQuery(function () {
        var $ = jQuery,
            // 优化retina, 在retina下这个值是2
            ratio = window.devicePixelRatio || 1,
            // 缩略图大小
            thumbnailWidth = 100 * ratio,
            thumbnailHeight = 100 * ratio,
            // Web Uploader实例
            uploader;
        // 初始化Web Uploader
        uploader = WebUploader.create({
            // 自动上传。
            auto: true,
            // 文件接收服务端。
            server: uploadUrl,
            // 选择文件的按钮。可选。
            // 内部根据当前运行是创建，可能是input元素，也可能是flash.
            pick: '#filePicker',
            // 只允许选择文件，可选。
            accept: {
                title: 'Images',
                extensions: 'gif,jpg,jpeg,bmp,png',
                mimeTypes: 'image/*'
            }
        });
        // // 当有文件添加进来的时候
        // uploader.on('fileQueued', function (file) {
        //     var $li = $(
        //         '<div id="' + file.id + '" class="file-item thumbnail">' +
        //         '<img>' +
        //         '<div class="info">' + file.name + '</div>' +
        //         '</div>'
        //         ),
        //         $img = $li.find('img');
        //
        //     $list.append($li);
        //
        //     // 创建缩略图
        //     uploader.makeThumb(file, function (error, src) {
        //         if (error) {
        //             $img.replaceWith('<span>不能预览</span>');
        //             return;
        //         }
        //
        //         $img.attr('src', src);
        //     }, thumbnailWidth, thumbnailHeight);
        // });

        // 文件上传过程中创建进度条实时显示。
        uploader.on('uploadProgress', function (file, percentage) {

        });
        // 文件上传成功
        uploader.on('uploadSuccess', function (file, response) {
            photo=imgUrl+response._raw
        });
        // 文件上传失败，现实上传出错。
        uploader.on('uploadError', function (file) {

        });
        // 完成上传完了，成功或者失败，先删除进度条。
        uploader.on('uploadComplete', function (file) {

        });
    });
    // 下拉
    function DropDown(el) {
        this.dd   = el;
        this.span = this.dd.children('span');
        this.li   = this.dd.find('ul.dropdown li');
        this.val  = '';
    }
    DropDown.prototype.initEvents = function() {
        var obj = this;
        obj.dd.on('click', function(event){
            $(this).toggleClass('active').siblings().removeClass('active');
            event.stopPropagation();
        });
        obj.li.on('click', function() {
            var opt = $(this);
            obj.val = opt.html();
            if (obj.span.html() == obj.val) return;
            obj.span.html(obj.val);
            groups=obj.val;
            $(document).click(function() {
                $('.select-btn').removeClass('active');
            });
        })
    }
    new DropDown($('#type')).initEvents();
    // 提交
    $("#submit").click(function () {
        var name=$("#name").val();
        var title=$("#title").val();
        var number=$("#number").val();
        var details=$("#details").val();
        if (name == ""||name==undefined) {
            alert("姓名不能为空")
            return
        }
        if (title == ""||title==undefined) {
            alert("作品名称不能为空")
            return
        }
        if (number == ""||number==undefined) {
            alert("联系电话不能为空")
            return
        }
        if (groups == ""||groups==undefined) {
            alert("请选择组别")
            return
        }
        if (photo == ""||photo==undefined) {
            alert("请上传以往作品")
            return
        }
        if (details == ""||details==undefined) {
            alert("作品描述不能为空")
            return
        }

        $.ajax({
            type:'get',
            url:baseUrl+"rest/list",
            data:{title:title,
                name:name,
                photo:photo,
                number:number,
                groups:groups,
                details:details
            },
            cache:false,
            dataType:'json',
            success:function(data){
                alert("保存成功");
            },
            error:function (error) {
                alert("保存失败")
            }
        });
    })
</script>
</body>
</html>
